FUNCTION_BLOCK ControlDisparoSilo

VAR_INPUT
 
      
       numDisparosPos:INTEGER; //numero de disparos posibles del silo en un turno
       MapLocation distanciaObj = new MapLocation();
       MapLocation poblacionDeObj = new MapLocation();
END_VAR

VAR_OUTPUT

	 disparoEfectuado:BOOLEAN; // TRUE, si ha efectuado disparo, FALSE, en caso contrario
	 dirX:INTEGER; //Coordenada X de la direccion origen del disparo
	 dirY:INTEGER; //Coordenada Y de la direccion origen del disparo
	 dirDestX:INTEGER; //Coordenada X de la direccion de destino del misil
	 dirDestY:INTEGER; //Coordenada Y de la direccion de destino del misil

END_VAR
MapLocation dirDisparo = new MapLocation();  // direccion a la que disparamos el misil del silo

FUZZIFY numDisparosPos
 TERM numDisparos:=1; //Numero de disparos posibles del silo en este turno
 
 END_FUZZIFY

Silo smisil = new Silo();


DEFUZZIFY disparoEfectuado
 TERM disparoRealizado:=FALSE;
 END_DEFUZZIFY

RULEBLOCK No1
AND:MIN;
ACT:PROD;
ACCU:MAX;
RULE Rule1 :IF !smisil.destroyed AND IF numDisparos IS 1  then
             disparoEfectuado:=TRUE;
             misil.launchMissile;
             dirX:=dirDisparo.x;
             dirY:=dirDisparo.y;
             numDisparos--;
             dirDestX:=dirDisparo.otherLocation.x;
             dirDestY:=dirDisparo.otherLocation.y;
END_RULEBLOCK

END_FUNCTION_BLOCK                
