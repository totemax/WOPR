FUNCTION_BLOCK ControlDisparoSilo

VAR_INPUT
 
      
       numDisparosPos:INTEGER; //numero de disparos posibles del silo en un turno
       MapLocation distanciaObj = new MapLocation();
       MapLocation poblacionDeObj = new MapLocation();
END_VAR

VAR_OUTPUT

	 disparoEfectuado:BOOLEAN; // TRUE, si ha efectuado disparo, FALSE, en caso contrario
	 MapLocation posicionSilo = new MapLocation();
	 
	 dirX:INTEGER; //Coordenada X de la direccion del disparo
	 dirY:INTEGER; //Coordenada Y de la direccion del disparo

END_VAR
MapLocation dirDisparo = new MapLocation();  // direccion a la que disparamos el misil del silo

FUZZIFY numDisparosPos
 TERM numDisparos:=1; //Numero de disparos posibles del silo en este turno
 
 END_FUZZIFY

Silo misil = new Silo();


DEFUZZIFY disparoEfectuado
 TERM disparoRealizado:=FALSE;
 END_DEFUZZIFY

RULEBLOCK No1
AND:MIN;
ACT:PROD;
ACCU:MAX;
RULE Rule1 :IF !misil.destroyed AND IF numDisparos IS 1  then
             disparoEfectuado:=TRUE;
             misil.launchMissile;
             dirX:=dirDisparo.x;
             dirY:=dirDisparo.y;

             
END_RULEBLOCK

END_FUNCTION_BLOCK                
